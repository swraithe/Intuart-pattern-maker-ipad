import { useState } from 'react';
import {
    Modal,
    ModalOverlay,
    ModalContent,
    ModalHeader,
    ModalFooter,
    ModalBody,
} from '@chakra-ui/react'
import ArtBoardItem from './ArtBoardItem'
import NewArtboardDialog from './NewArtBoardDialog';
import useDataContext from '../context/useDataContext';

export default function ArtBoardDialog({ isOpen, onClose }) {

    const { artBoards, setArtBoards } = useDataContext();
    const [showNewArtboardDialog, setShowNewArtboardDialog] = useState(false);

    const onCreateNewArtBoard = () => {
        setShowNewArtboardDialog(true);
    }
    return (
        <>
            <Modal isCentered isOpen={isOpen} onClose={onClose} size="xl">
                <ModalOverlay
                    bg='blackAlpha.300'
                    backdropFilter='blur(3px) hue-rotate(90deg)'
                />
                <ModalContent className="!rounded-3xl">
                    <ModalHeader>
                        <div className='flex gap-4 items-center justify-between'>
                            <svg width="165" height="26" viewBox="0 0 165 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13 25L13.192 19.976H7.848L6.28 25H0.168L8.392 1.96H18.952L19.08 25H13ZM11.688 7.56L9.16 15.688H13.352L13.704 7.56H11.688ZM37.724 12.872C37.724 13.5973 37.596 14.3013 37.34 14.984C37.1053 15.6667 36.8707 16.168 36.636 16.488L36.284 16.936H31.452C31.9853 16.4453 32.252 15.8373 32.252 15.112C32.252 14.728 32.124 14.4187 31.868 14.184C31.6333 13.928 31.3027 13.8 30.876 13.8C30.1507 13.8 29.5213 14.1627 28.988 14.888L27.196 25H21.756L24.476 9.608H29.532L29.148 11.752C30.364 10.024 31.836 9.16 33.564 9.16C34.9507 9.16 35.9853 9.49067 36.668 10.152C37.372 10.8133 37.724 11.72 37.724 12.872ZM45.4895 25.448C43.0148 25.448 41.2335 24.8933 40.1455 23.784C39.3348 22.9733 38.9295 21.8853 38.9295 20.52C38.9295 20.072 38.9722 19.592 39.0575 19.08L41.2335 6.696L47.0895 4.264L46.1615 9.608H54.9935L54.1935 14.12H45.3615L44.7215 17.736C44.6362 18.1413 44.5935 18.504 44.5935 18.824C44.5935 20.168 45.2335 20.84 46.5135 20.84C47.1962 20.84 47.7615 20.552 48.2095 19.976C48.6788 19.4 48.9988 18.632 49.1695 17.672H54.4815C53.5855 22.856 50.5882 25.448 45.4895 25.448ZM67.18 9.16C69.292 9.16 70.7747 9.74667 71.628 10.92C72.268 11.752 72.588 12.7653 72.588 13.96C72.588 14.4507 72.5347 14.9627 72.428 15.496L71.788 19.08C71.4253 21.128 70.476 22.7067 68.94 23.816C67.4253 24.904 65.5053 25.448 63.18 25.448C60.876 25.448 59.1053 24.9893 57.868 24.072C56.8867 23.3467 56.396 22.3333 56.396 21.032C56.396 20.6907 56.428 20.3387 56.492 19.976L59.884 0.711998H65.324L63.692 10.024C64.588 9.448 65.7507 9.16 67.18 9.16ZM66.892 15.976C66.9133 15.8053 66.924 15.5707 66.924 15.272C66.924 14.952 66.7853 14.6213 66.508 14.28C66.252 13.9173 65.676 13.736 64.78 13.736C63.9053 13.736 63.276 14.0027 62.892 14.536L61.964 19.88C62.22 20.52 62.7533 20.84 63.564 20.84C65.2067 20.84 66.1773 20.0187 66.476 18.376L66.892 15.976ZM84.022 9.16C86.326 9.16 88.0647 9.66133 89.238 10.664C90.1553 11.4533 90.614 12.552 90.614 13.96C90.614 14.4293 90.5607 14.9413 90.454 15.496L89.782 19.24C89.3767 21.5013 88.4273 23.1013 86.934 24.04C85.462 24.9787 83.4887 25.448 81.014 25.448C78.5393 25.448 76.726 24.9787 75.574 24.04C74.7207 23.336 74.294 22.28 74.294 20.872C74.294 20.3813 74.3473 19.8373 74.454 19.24L75.126 15.496C75.8727 11.272 78.838 9.16 84.022 9.16ZM84.886 16.136C84.9287 15.9227 84.95 15.656 84.95 15.336C84.95 14.9947 84.8113 14.6213 84.534 14.216C84.2567 13.8107 83.766 13.608 83.062 13.608C82.3793 13.608 81.8033 13.8427 81.334 14.312C80.8647 14.76 80.566 15.368 80.438 16.136L80.022 18.536C79.9793 18.7493 79.958 19.0267 79.958 19.368C79.958 19.688 80.0967 20.04 80.374 20.424C80.6513 20.808 81.1313 21 81.814 21C82.518 21 83.1047 20.7653 83.574 20.296C84.0433 19.8053 84.342 19.2187 84.47 18.536L84.886 16.136ZM107.525 20.072C107.525 20.6267 107.802 20.904 108.357 20.904C108.933 20.904 109.413 20.7973 109.797 20.584L109.637 24.2C108.613 25.032 107.461 25.448 106.181 25.448C103.834 25.448 102.533 24.5947 102.277 22.888C101.21 24.5947 99.6418 25.448 97.5725 25.448C94.0738 25.448 92.3245 23.944 92.3245 20.936C92.3245 20.424 92.3778 19.8587 92.4845 19.24L93.1565 15.496C93.4978 13.576 94.2765 12.0507 95.4925 10.92C96.7298 9.768 98.3298 9.192 100.293 9.192C102.277 9.192 103.621 9.65067 104.325 10.568L104.485 9.608H109.349L107.557 19.688C107.535 19.816 107.525 19.944 107.525 20.072ZM98.0525 18.536C98.0098 18.728 97.9885 18.9947 97.9885 19.336C97.9885 19.6773 98.1485 20.0187 98.4685 20.36C98.7885 20.68 99.3218 20.84 100.069 20.84C100.837 20.84 101.498 20.5413 102.053 19.944L103.013 14.568C102.778 14.0347 102.223 13.768 101.349 13.768C99.7058 13.768 98.7458 14.5573 98.4685 16.136L98.0525 18.536ZM127.287 12.872C127.287 13.5973 127.159 14.3013 126.903 14.984C126.668 15.6667 126.433 16.168 126.199 16.488L125.847 16.936H121.015C121.548 16.4453 121.815 15.8373 121.815 15.112C121.815 14.728 121.687 14.4187 121.431 14.184C121.196 13.928 120.865 13.8 120.439 13.8C119.713 13.8 119.084 14.1627 118.551 14.888L116.759 25H111.319L114.039 9.608H119.095L118.711 11.752C119.927 10.024 121.399 9.16 123.127 9.16C124.513 9.16 125.548 9.49067 126.231 10.152C126.935 10.8133 127.287 11.72 127.287 12.872ZM143.212 20.072C143.212 20.6267 143.489 20.904 144.044 20.904C144.62 20.904 145.1 20.7973 145.484 20.584L145.324 24.2C144.3 25.032 143.148 25.448 141.868 25.448C139.521 25.448 138.22 24.5947 137.964 22.888C136.897 24.5947 135.329 25.448 133.26 25.448C129.761 25.448 128.012 23.944 128.012 20.936C128.012 20.424 128.065 19.8587 128.172 19.24L128.844 15.496C129.185 13.576 129.964 12.0507 131.18 10.92C132.417 9.768 134.124 9.192 136.3 9.192C137.644 9.192 138.711 9.48 139.5 10.056L141.132 0.711998H146.604L143.244 19.688C143.223 19.816 143.212 19.944 143.212 20.072ZM133.74 18.536C133.697 18.728 133.676 18.9947 133.676 19.336C133.676 19.6773 133.836 20.0187 134.156 20.36C134.476 20.68 135.009 20.84 135.756 20.84C136.524 20.84 137.185 20.5413 137.74 19.944L138.7 14.568C138.465 14.0347 137.911 13.768 137.036 13.768C135.393 13.768 134.433 14.5573 134.156 16.136L133.74 18.536ZM164.079 12.936C164.079 13.64 163.866 14.2907 163.439 14.888H158.191C158.362 14.76 158.447 14.5467 158.447 14.248C158.447 13.9493 158.276 13.7147 157.935 13.544C157.594 13.352 157.156 13.256 156.623 13.256C155.023 13.256 154.223 13.7467 154.223 14.728C154.223 15.112 154.522 15.3893 155.119 15.56C155.716 15.7307 156.442 15.8693 157.295 15.976C158.148 16.0827 159.002 16.2427 159.855 16.456C160.708 16.648 161.434 17.0427 162.031 17.64C162.628 18.2373 162.927 19.0373 162.927 20.04C162.927 21.8107 162.212 23.1547 160.783 24.072C159.375 24.9893 157.316 25.448 154.607 25.448C151.898 25.448 149.999 25.0107 148.911 24.136C148.058 23.4533 147.631 22.5147 147.631 21.32C147.631 20.9787 147.663 20.6267 147.727 20.264L153.071 20.2C153.028 20.4987 153.199 20.7653 153.583 21C153.988 21.2133 154.575 21.32 155.343 21.32C156.111 21.32 156.666 21.2453 157.007 21.096C157.348 20.9253 157.519 20.616 157.519 20.168C157.519 19.8693 157.22 19.6667 156.623 19.56C156.026 19.432 155.29 19.3253 154.415 19.24C153.562 19.1547 152.698 19.016 151.823 18.824C150.97 18.632 150.244 18.2267 149.647 17.608C149.05 16.9893 148.751 16.1787 148.751 15.176C148.751 13.2347 149.498 11.7413 150.991 10.696C152.506 9.65067 154.682 9.128 157.519 9.128C161.892 9.128 164.079 10.3973 164.079 12.936Z" fill="black" />
                            </svg>
                            <button className="bg-primary text-black h-12 px-8 justify-center rounded-full inline-flex gap-1 items-center font-bold" onClick={onCreateNewArtBoard}>
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 8H1C0.716667 8 0.479167 7.90417 0.2875 7.7125C0.0958333 7.52083 0 7.28333 0 7C0 6.71667 0.0958333 6.47917 0.2875 6.2875C0.479167 6.09583 0.716667 6 1 6H6V1C6 0.716667 6.09583 0.479167 6.2875 0.2875C6.47917 0.0958333 6.71667 0 7 0C7.28333 0 7.52083 0.0958333 7.7125 0.2875C7.90417 0.479167 8 0.716667 8 1V6H13C13.2833 6 13.5208 6.09583 13.7125 6.2875C13.9042 6.47917 14 6.71667 14 7C14 7.28333 13.9042 7.52083 13.7125 7.7125C13.5208 7.90417 13.2833 8 13 8H8V13C8 13.2833 7.90417 13.5208 7.7125 13.7125C7.52083 13.9042 7.28333 14 7 14C6.71667 14 6.47917 13.9042 6.2875 13.7125C6.09583 13.5208 6 13.2833 6 13V8Z" fill="#1C1B1F" />
                                </svg>
                                <p>New Artboard</p>
                            </button>
                        </div>
                    </ModalHeader>
                    <ModalBody>
                        <div className="grid grid-cols-4 gap-4">
                            {
                                artBoards?.map((item, index) => (
                                    <ArtBoardItem item={item} key={index} />
                                ))
                            }
                        </div>
                    </ModalBody>
                    <ModalFooter>
                        <button className="rounded-full bg-[#383838] border-[#383838] text-[#fff] border px-4 py-1 ml-2 text-lg" onClick={onClose}>Done</button>
                    </ModalFooter>
                </ModalContent>
            </Modal>
            <NewArtboardDialog
                isOpen={showNewArtboardDialog}
                onClose={() => setShowNewArtboardDialog(false)}
                onCreate={(item) => {
                    setArtBoards(
                        [
                            ...artBoards,
                            {
                                ...item,
                                title: `Artboard ${artBoards.length + 1}`
                            }
                        ]
                    )
                    setShowNewArtboardDialog(false)
                }} />
        </>
    )
}